<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For You ‚ù§Ô∏è</title>

<style>
body {
  margin: 0;
  font-family: 'Georgia', serif;
  background: linear-gradient(to bottom, #ffd6e8, #fff);
  color: #4a2c2a;
  text-align: center;
  overflow-x: hidden;
  height: 100vh;
}

.container {
  padding: 40px 20px;
  max-width: 800px;
  margin: auto;
  transition: filter 2.5s ease, opacity 2.5s ease;
}

.container.blur {
  filter: blur(6px);
  opacity: 0.6;
}

h1 { font-size: 2.2em; margin-top: 10px; }

p {
  font-size: 1.15em;
  line-height: 1.8;
  margin: 20px 0;
}

.illust {
  width: 150px;
  height: auto;
  margin: 10px auto;
  display: block;
}

.card {
  background: white;
  padding: 35px;
  border-radius: 28px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.15);
  position: relative;
  z-index: 2;
  min-height: 300px;
}

button {
  background: #ff5c8a;
  border: none;
  padding: 16px 40px;
  font-size: 1.1em;
  color: white;
  border-radius: 50px;
  cursor: pointer;
  margin: 25px;
  transition: all 0.4s ease;
}

.yes-btn.grow {
  transform: scale(1.4);
  box-shadow: 0 0 30px rgba(255,92,138,0.6);
}

.no-btn {
  background: #aaa;
  position: absolute;
  font-size: 0.95em;
  transition: left 0.2s ease, top 0.2s ease;
}

#no-hint {
  position: absolute;
  background: #4a2c2a;
  color: white;
  padding: 5px 12px;
  border-radius: 10px;
  font-size: 0.8em;
  pointer-events: none;
  display: none;
  z-index: 10;
  white-space: nowrap;
}

#no-hint::after {
  content: '';
  position: absolute;
  bottom: -5px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid #4a2c2a;
}

.screen {
  opacity: 0;
  transform: scale(0.95);
  transition: opacity 2.5s ease, transform 2.5s ease;
  display: none;
}

.screen.show {
  display: block;
  opacity: 1;
  transform: scale(1);
}

.full-center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  width: 90%;
  max-width: 500px;
}

/* --- STYLED TYPING BOX --- */
#typingBox {
  background: white;
  padding: 30px;
  border-radius: 28px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.1);
  width: 100%;
  display: none;
  opacity: 0;
  transition: opacity 1.5s ease;
  /* UPDATED: Only final message is Papyrus */
  font-family: 'Papyrus', 'Fantasy', serif;
}

.heart-blast {
  position: fixed;
  pointer-events: none;
  font-size: 30px;
  z-index: 9999;
  animation: blastOut 2s ease-out forwards;
}

@keyframes blastOut {
  0% { transform: translate(0, 0) scale(0.5) rotate(0deg); opacity: 1; }
  100% { transform: translate(var(--x), var(--y)) scale(1.5) rotate(var(--r)); opacity: 0; }
}

.photo-wrapper {
  position: relative;
  width: 380px; 
  height: 450px;
  opacity: 0;
  transition: opacity 3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* --- DANCING LETTERS STYLING --- */
#dancingName {
  display: flex;
  justify-content: center;
  gap: 4px;
  margin-bottom: 15px;
  z-index: 10;
}

.letter {
  font-size: 3.2rem;
  font-weight: 900;
  color: #ff5c8a;
  display: inline-block;
  opacity: 0;
  transform: translateY(-400px) rotate(-20deg);
  /* STYLISH SHADOW FOR LETTERS */
  text-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2), 0 0 15px rgba(255, 92, 138, 0.3);
  /* UPDATED: Dancing name is Papyrus */
  font-family: 'Papyrus', 'Fantasy', serif;
}

.dance-fall {
  animation: letterDanceIn 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes letterDanceIn {
  0% { opacity: 0; transform: translateY(-400px) rotate(-30deg); }
  60% { transform: translateY(20px) rotate(15deg); }
  80% { transform: translateY(-10px) rotate(-5deg); }
  100% { opacity: 1; transform: translateY(0) rotate(0deg); }
}

.photo-frame {
  width: 300px; 
  height: 300px;
  background: white;
  padding: 10px;
  border-radius: 40px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;
  overflow: hidden;
}

.her-photo {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 30px;
}

.big-symbol {
  position: absolute;
  font-size: 50px; 
  filter: drop-shadow(0 0 10px rgba(255,92,138,0.3));
  animation: floatAround 4s ease-in-out infinite;
  z-index: 3;
}

.decor-img {
  position: absolute;
  width: 65px;
  animation: floatAround 5s ease-in-out infinite;
  z-index: 3;
}

.sym-1 { top: 40px; left: -50px; }
.sym-2 { bottom: -20px; right: -50px; }
.sym-3 { top: 60%; right: -90px; transform: translateY(-50%); }
.dec-1 { top: 50px; right: -50px; }
.dec-2 { bottom: -40px; left: -50px; }

@keyframes floatAround {
  0%, 100% { transform: translate(0, 0) rotate(0deg); }
  50% { transform: translate(-10px, -15px) rotate(8deg); }
}

.soft-emoji {
  position: fixed;
  bottom: -40px;
  font-size: 32px;
  opacity: 0;
  animation: softFloat 14s linear forwards;
  pointer-events: none;
  z-index: 1;
}

@keyframes softFloat {
  0% { opacity: 0; transform: translateY(0) scale(0.8); }
  20% { opacity: 0.6; }
  80% { opacity: 0.6; }
  100% { opacity: 0; transform: translateY(-120vh) scale(1.3); }
}

.envelope-img {
  width: 180px;
  cursor: pointer;
  animation: envelopeFloat 2.5s ease-in-out infinite;
  transition: opacity 1.5s ease;
}

#typedText {
  font-size: 1.3em;
  line-height: 1.8;
  white-space: pre-line;
  margin: 0;
}
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>

<div class="container" id="container">
  <div id="screen1" class="screen show">
    <img src="squirrel.png" alt="Squirrel" class="illust">
    <h1>This page is flirting with you‚Ä¶ slowly üòè</h1>
    <p>Somewhere between hello and now,<br>you became my favorite pause in the day.</p>
    <div class="card">
      <img src="birthday.png" alt="Birthday Squirrel" class="illust" style="width:120px">
      <p>Hold your phone like you‚Äôd hold my hand.<br>I‚Äôd be close enough to feel your breath.</p>
    </div>
    <button onclick="goToValentine()">Click here üíå</button>
  </div>

  <div id="screen2" class="screen">
    <img src="impressed.png" alt="Excited" class="illust">
    <div class="card" id="card2">
      <p style="font-size:1.5em;">Be honest‚Ä¶ üòå<br>Will you be my Valentine? üíñ</p>
      <button class="yes-btn" id="yesBtn" onclick="sayYes()">YES üíï</button>
      <div id="no-hint">Nice try! üòâ</div>
      <button class="no-btn" id="noBtn">NO üôà</button>
      <img src="run.png" id="runSquirrel" style="width:80px; position:absolute; display:none;">
    </div>
  </div>

  <div id="screen3" class="screen"></div>
</div>

<div id="centricOverlay" class="full-center" style="display:none;">
  <div id="envelopeGroup">
    <img src="love-letter.png" class="envelope-img" id="envelope" alt="Love Letter">
    <p id="tapHint" style="margin-top:15px; opacity:0.6;">Tap the letter‚Ä¶</p>
  </div>

  <div id="typingBox">
    <div id="typedText"></div>
  </div>

  <div id="photoContainer" class="photo-wrapper" style="display:none;">
    <div id="dancingName">
      <span class="letter">J</span><span class="letter">U</span><span class="letter">N</span><span class="letter">E</span><span class="letter">A</span><span class="letter">M</span><span class="letter">M</span><span class="letter">A</span>
    </div>

    <div class="photo-frame">
      <img src="her-photo.jpg" alt="Her Photo" class="her-photo">
    </div>

    <span class="big-symbol sym-1">‚ù§Ô∏è</span>
    <span class="big-symbol sym-2">üíñ</span>
    <span class="big-symbol sym-3" style="font-size: 50px;">üíï</span>
    <img src="squirrel.png" class="decor-img dec-1">
    <img src="in-love.png" class="decor-img dec-2">
  </div>
</div>

<script>
const container = document.getElementById("container");
const bgMusic = document.getElementById("bgMusic");
const screen1 = document.getElementById("screen1");
const screen2 = document.getElementById("screen2");
const screen3 = document.getElementById("screen3");
const centricOverlay = document.getElementById("centricOverlay");
const envelopeGroup = document.getElementById("envelopeGroup");
const typingBox = document.getElementById("typingBox");
const photoContainer = document.getElementById("photoContainer");

let emojiInterval;
bgMusic.volume = 0;

function fadeInMusic() {
  bgMusic.play().catch(e => console.log("Audio interaction required"));
  let v = 0;
  const fade = setInterval(() => {
    if (v < 0.6) { v += 0.02; bgMusic.volume = v; }
    else clearInterval(fade);
  }, 200);
}

function startSoftEmojis() {
  if(emojiInterval) clearInterval(emojiInterval);
  const emojis = ["‚ù§Ô∏è","üíñ","‚ú®","üí´","üå∏","ü¶ã","üíï","ü´∂"];
  emojiInterval = setInterval(() => {
    const e = document.createElement("div");
    e.className = "soft-emoji";
    e.innerText = emojis[Math.floor(Math.random() * emojis.length)];
    e.style.left = Math.random() * 100 + "%";
    document.body.appendChild(e);
    setTimeout(() => e.remove(), 20000);
  }, 600);
}

function triggerHeartBlast() {
  const heartEmojis = ["‚ù§Ô∏è", "üíñ", "üíï", "üíò", "üíù", "üíó"];
  const centerX = window.innerWidth / 2;
  const centerY = window.innerHeight / 2;
  for (let i = 0; i < 40; i++) {
    const heart = document.createElement("div");
    heart.className = "heart-blast";
    heart.style.left = centerX + "px";
    heart.style.top = centerY + "px";
    heart.innerText = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
    const angle = Math.random() * Math.PI * 2;
    const dist = 200 + Math.random() * 600;
    heart.style.setProperty('--x', `${Math.cos(angle)*dist}px`);
    heart.style.setProperty('--y', `${Math.sin(angle)*dist}px`);
    heart.style.setProperty('--r', `${Math.random()*360}deg`);
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 2000);
  }
}

function cinematicSwitch(from, to, delay=2000){
  container.classList.add("blur");
  from.classList.remove("show");
  setTimeout(()=>{
    from.style.display="none";
    to.style.display="block";
    if(to === screen3) centricOverlay.style.display = "flex";
    setTimeout(()=>{
      to.classList.add("show");
      container.classList.remove("blur");
    },400);
  },delay);
}

function goToValentine(){ cinematicSwitch(screen1, screen2); }
function sayYes(){ cinematicSwitch(screen2, screen3); setTimeout(fadeInMusic, 2500); }

function triggerDancingLetters() {
  const letters = document.querySelectorAll('.letter');
  letters.forEach((letter, index) => {
    setTimeout(() => {
      letter.classList.add('dance-fall');
    }, index * 100); 
  });
}

function typeFinalMessage(){
  const text = `I knew you‚Äôd say yes üòèüíû\n\nNow I get to stay a little closer,\nsmile a little longer,\nand fall for you ‚Äî slowly, deeply.\n\nHappy Valentine‚Äôs Day üíò`;
  const el = document.getElementById("typedText");
  typingBox.style.display = "block";
  setTimeout(() => typingBox.style.opacity = "1", 100);

  let i=0;
  const typing=setInterval(()=>{
    el.textContent+=text[i++];
    if(i>=text.length) {
        clearInterval(typing);
        setTimeout(() => {
          typingBox.style.opacity = "0";
          setTimeout(() => {
            typingBox.style.display = "none";
            clearInterval(emojiInterval);
            photoContainer.style.display = "flex";
            setTimeout(() => {
              photoContainer.style.opacity = "1";
              triggerDancingLetters();
            }, 100);
          }, 1500);
        }, 3000);
    }
  },45);
}

document.getElementById("envelope").addEventListener("click",()=>{
  triggerHeartBlast();
  startSoftEmojis();
  envelopeGroup.style.opacity="0";
  setTimeout(()=>{
    envelopeGroup.style.display="none";
    typeFinalMessage();
  },800);
});

const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");
const card2=document.getElementById("card2");
const runSquirrel = document.getElementById("runSquirrel");
const noHint = document.getElementById("no-hint");

const runawayPhrases = ["Wrong way! üòÇ", "Nice try! üòâ", "Not so fast! üèÉ‚Äç‚ôÇÔ∏è", "Over here! üòú", "Nope! ‚ùå", "Try again! ‚ú®"];
let phraseIdx = 0;

document.addEventListener("mousemove",e=>{
  if(!screen2.classList.contains("show"))return;
  const rect=noBtn.getBoundingClientRect();
  const d=Math.hypot(e.clientX-(rect.left+rect.width/2), e.clientY-(rect.top+rect.height/2));
  
  if(d < 120){
    yesBtn.classList.add("grow");
    const card=card2.getBoundingClientRect();
    const newLeft = Math.random()*(card.width-rect.width-40);
    const newTop = Math.random()*(card.height-rect.height-40);
    
    noBtn.style.left= newLeft + "px";
    noBtn.style.top= newTop + "px";
    runSquirrel.style.display = "block";
    runSquirrel.style.left = (newLeft - 40) + "px";
    runSquirrel.style.top = (newTop - 40) + "px";

    noHint.style.display = "block";
    noHint.innerText = runawayPhrases[phraseIdx];
    noHint.style.left = (newLeft + (rect.width/2) - 40) + "px";
    noHint.style.top = (newTop - 35) + "px";
    phraseIdx = (phraseIdx + 1) % runawayPhrases.length;
  } else { 
    yesBtn.classList.remove("grow"); 
  }
});
</script>

</body>
</html>